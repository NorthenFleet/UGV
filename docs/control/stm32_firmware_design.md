# STM32 固件设计

目标：稳定驱动 18 关节舵机，提供安全保护与上位机通信。

模块与任务：
- PWM/舵机控制：定时器输出，支持更新速率 200~400Hz
- UART 通信：接收命令帧、发送状态帧，CRC16 校验
- 步态插值（可选）：在通信丢包时平滑过渡、保形
- 安全监控：角度/速度/电流（如可读）超限保护与急停逻辑

调度与中断：
- 主循环：解析命令→更新目标→驱动 PWM
- UART 中断/DMA：高效接收缓冲→状态机解析
- 定时中断：控制周期触发（如 100Hz），同步更新舵机目标

状态回传：
- 关节角度/速度/（温度/电流可选）
- IMU 姿态（若由 STM32 读取）